<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="../../favicon.ico">

  <title>TCC</title>

  <!-- Bootstrap core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">

  <!-- CSS code from Bootply.com editor -->


  <!-- Custom styles for this template -->


  <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
  <!--[if lt IE 9]><script src="js/ie8-responsive-file-warning.js"></script><![endif]-->


  <style>
  body {
    padding-top: 50px;
  }
  .starter-template {
    padding: 40px 15px;
    text-align: center;
  }
  </style>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script src="js/index.js"></script>
</head>

<body>
  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">Diario Eletrônico</a>
      </div>
      <div id="navbar" class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li class="active"><a href="principal.html">Inicio</a></li>
          <li><a href="sobre.html">Sobre</a></li>
          <li><a href="sair.html">Sair</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </nav>
  <h3><center>Para começar preencha os campos abaixo: <center></h3>

  <script>

  function Disciplinas()
  {
    $('#disciplina').empty();
    $('#disciplina').append("<option>Aguarde....</option>");
    $.ajax({
      type: "POST",
      url: 'http://localhost/projetos/TCC_WEBSERVICE/inicio/dropdown_disciplina',
      ContentType:"application/json; charset=utf-8",
      dataType: "json",
      success: function(data)
      {
        $('#disciplina').empty();
        $('#disciplina').append("<option>Selecione a Disciplina</option>");
        $.each(data, function(i, item)
        {
          $('#disciplina').append("<option value='"+ data[i].id +"'>"+ data[i].descricao +"</option>");
        });
      },
      complete : function()
      {

      }
    });
  };


  function Serie()
  {
    var materia = $('#disciplina').val();
    $('#serie').empty();
    $('#serie').append("<option>Aguarde....</option>");
    $.ajax({
      type: "POST",
      url: 'http://localhost/projetos/TCC_WEBSERVICE/inicio/dropdown_serie',
      ContentType:"application/json; charset=utf-8",
      dataType: "json",
      data:{
        'materia':materia
      },
      success: function(data)
      {
        $('#serie').empty();
        $('#serie').append("<option>Selecione a Série</option>");
        $.each(data, function(i, item)
        {
          $('#serie').append("<option value='"+ data[i].id +"'>"+ data[i].descricao +"</option>");
        });
      },
      complete : function()
      {

      }
    });
  };

  function Turma()
  {
    var serie = $('#serie').val();
    $('#turma').empty();
    $('#turma').append("<option>Aguarde....</option>");
    $.ajax({
      type: "POST",
      url: 'http://localhost/projetos/TCC_WEBSERVICE/inicio/dropdown_turma',
      ContentType:"application/json; charset=utf-8",
      dataType: "json",
      data:{
        'serie':serie
      },
      success: function(data)
      {
        $('#turma').empty();
        $('#turma').append("<option>Selecione a Série</option>");
        $.each(data, function(i, item)
        {
          $('#turma').append("<option value='"+ data[i].id +"'>"+ data[i].descricao +"</option>");
        });
      },
      complete : function()
      {

      }
    });
  };

  $( document ).ready(function()
  {
    Disciplinas();
    $('#disciplina').change(function()
    {
      Serie();
      $('#serie').change(function()
      {
        Turma();
      });
    });

  });

  </script>


  <form id="filtros">
    <select name="" class="form-control" id="disciplina"><option value="">Aguarde...</option></select><br>
    <select name="" class="form-control" id="serie"><option value="">Aguarde...</option></select><br>
    <select name="" class="form-control" id="turma"><option value="">Aguarde...</option></select><br>
  </form>




  <a href="#" onclick="salvarDados('presenca');" class="btn btn-primary btn-lg btn-block">Controle de Presença</a>
  <a href="#" onclick="salvarDados('atividades')" class="btn btn-primary btn-lg btn-block">Controle de Atividades</a>
  <a href="#" onclick="salvarDados('notas')" class="btn btn-primary btn-lg btn-block">Controle de Notas</a>
  <a href="#" onclick="salvarDados('relatorio')" class="btn btn-primary btn-lg btn-block">Relatório da turma</a>
  <a href="principal.html" class="btn btn-default btn-lg btn-block">Limpar e começar de novo</a>


  <script>

  function salvarDados(pagina)
  {
    //verificar se todos os dados do formulario estao preechidos

    if (($('#disciplina').val() == '') || ($('#serie').val() == '') || ($('#turma').val() == '')) {
      alert('Preencha os filtros para continuar!');
    }else{

      var disciplina = $('#disciplina').val();
      var serie      = $('#serie').val();
      var turma      = $('#turma').val();

      $.ajax({
        type : 'POST',           
        url : 'http://localhost/projetos/TCC_WEBSERVICE/inicio/salva_sessions',          
        data:{
          'disciplina':disciplina,
          'serie':serie,
          'turma':turma
        },
        success : function(data) {            
          window.location.href = pagina + ".html";
        },
        error : function(xhr, type) { 
          alert('Houve algum erro no servidor. Contacte o Administrador!');
        }



      });
      return false;
    };
  }

</script>


<!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->

</body>
</html>
